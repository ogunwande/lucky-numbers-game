
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate Gaming Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 1rem;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.2);
            max-width: 800px;
            width: 100%;
            text-align: center;
            max-height: 90vh;
            overflow-y: auto;
        }

        h1 {
            margin-bottom: 1rem;
            font-size: 2.5rem;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tabs {
            display: flex;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 0.3rem;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            min-width: 120px;
            padding: 0.8rem;
            background: transparent;
            border: none;
            color: white;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            margin: 0.2rem;
        }

        .tab.active {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            font-weight: bold;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .balance-stats {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .stat-card {
            flex: 1;
            min-width: 120px;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.8;
        }

        .daily-bonus {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            padding: 1rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .daily-bonus:hover {
            transform: translateY(-2px);
        }

        .daily-bonus.claimed {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* Trivia Game Styles */
        .trivia-setup {
            margin-bottom: 2rem;
        }

        .category-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .category-btn {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .category-btn:hover {
            transform: translateY(-2px);
            background: rgba(255, 255, 255, 0.2);
        }

        .category-btn.selected {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            border-color: #ffd700;
        }

        .trivia-game {
            display: none;
        }

        .trivia-game.active {
            display: block;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .question-counter {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .timer {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: conic-gradient(#ff6b6b 0deg, #ff6b6b 0deg, rgba(255, 255, 255, 0.2) 0deg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
            color: white;
            position: relative;
            transition: all 0.1s ease;
        }

        .timer.warning {
            animation: pulse 0.5s infinite;
        }

        .timer.listening {
            background: linear-gradient(45deg, #4ecdc4, #44a08d) !important;
            animation: listeningPulse 1.5s infinite;
        }

        @keyframes listeningPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.05); opacity: 0.8; }
        }

        .timer.countdown-start {
            animation: countdownStart 0.5s ease;
            border: 3px solid #ffd700;
        }

        @keyframes countdownStart {
            0% { transform: scale(1); border-color: #ffd700; }
            50% { transform: scale(1.2); border-color: #ff6b6b; }
            100% { transform: scale(1); border-color: #ffd700; }
        }

        .next-question-btn.auto-advancing {
            background: linear-gradient(45deg, #ffc107, #fd7e14) !important;
            animation: autoAdvancePulse 1s infinite;
        }

        @keyframes autoAdvancePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }

        .question-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .category-tag {
            background: linear-gradient(45deg, #667eea, #764ba2);
            padding: 0.3rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-bottom: 1rem;
            display: inline-block;
        }

        .question-text {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 2rem;
            line-height: 1.5;
        }

        .answers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .answer-btn {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .answer-btn.selected {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            border-color: #4ecdc4;
        }

        .answer-btn.correct {
            background: linear-gradient(45deg, #28a745, #20c997);
            border-color: #28a745;
            animation: correctAnswer 0.6s ease;
        }

        .answer-btn.incorrect {
            background: linear-gradient(45deg, #dc3545, #fd7e14);
            border-color: #dc3545;
        }

        .answer-btn.disabled {
            pointer-events: none;
            opacity: 0.7;
        }

        .explanation {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            text-align: left;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .trivia-score {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            padding: 1rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .next-question-btn {
            background: linear-gradient(45deg, #28a745, #20c997);
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
            display: none;
        }

        .next-question-btn.show {
            display: inline-block;
        }

        .next-question-btn:hover {
            transform: translateY(-2px);
        }

        .game-complete {
            background: rgba(255, 255, 255, 0.1);
            padding: 2rem;
            border-radius: 20px;
            margin-top: 2rem;
            display: none;
        }

        .game-complete.show {
            display: block;
            animation: slideIn 0.5s ease;
        }

        .final-score {
            font-size: 2rem;
            color: #ffd700;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .play-again-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            color: white;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 1rem;
        }

        .play-again-btn:hover {
            transform: translateY(-2px);
        }

        /* Existing styles for numbers and football games */
        .bet-section {
            margin-bottom: 2rem;
        }

        .bet-input {
            padding: 0.8rem;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            width: 150px;
            margin: 0 0.5rem;
            text-align: center;
        }

        .numbers-section {
            margin-bottom: 2rem;
        }

        .number-inputs {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .number-input {
            width: 60px;
            height: 60px;
            border: none;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            transition: all 0.3s ease;
        }

        .number-input:focus {
            outline: none;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .quick-pick {
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .quick-pick:hover {
            transform: translateY(-1px);
        }

        .play-button {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            border: none;
            padding: 1rem 2rem;
            border-radius: 15px;
            color: white;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .play-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
        }

        .play-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results {
            margin-top: 2rem;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
        }

        .winning-numbers {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }

        .winning-number {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            color: #333;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2rem;
            animation: bounceIn 0.6s ease;
        }

        .result-text {
            font-size: 1.3rem;
            margin-bottom: 1rem;
        }

        .payout {
            font-size: 2rem;
            color: #ffd700;
            font-weight: bold;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            padding: 1rem;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            transform: translateX(300px);
            transition: all 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .rules {
            margin-top: 2rem;
            text-align: left;
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            border-radius: 10px;
            font-size: 0.9rem;
        }

        .rules h3 {
            margin-bottom: 0.5rem;
            color: #ffd700;
        }

        /* Football styles (abbreviated for space) */
        .matches-container { margin-bottom: 2rem; }
        .match-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Animations */
        @keyframes bounceIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes slideIn {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }
            
            .balance-stats {
                flex-direction: column;
            }
            
            .category-selection {
                grid-template-columns: 1fr;
            }
            
            .answers-grid {
                grid-template-columns: 1fr;
            }
            
            .question-header {
                flex-direction: column;
            }
        }

        @media (max-width: 480px) {
            .number-inputs {
                gap: 0.3rem;
            }
            
            .number-input {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>🎮 Ultimate Gaming Hub</h1>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('numbers')">🎲 Numbers</button>
            <button class="tab" onclick="showTab('football')">⚽ Football</button>
            <button class="tab" onclick="showTab('trivia')">🧠 Trivia</button>
            <button class="tab" onclick="showTab('achievements')">🏆 Achievements</button>
            <button class="tab" onclick="showTab('stats')">📊 Stats</button>
        </div>

        <!-- Numbers Game Tab -->
        <div id="numbers" class="tab-content active">
            <div class="balance-stats">
                <div class="stat-card">
                    <div class="stat-value" id="balance">10,000</div>
                    <div class="stat-label">Balance (₦)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="level">1</div>
                    <div class="stat-label">Level</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="winStreak">0</div>
                    <div class="stat-label">Win Streak</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="triviaPoints">0</div>
                    <div class="stat-label">Trivia Points</div>
                </div>
            </div>

            <div class="daily-bonus" id="dailyBonus" onclick="claimDailyBonus()">
                <div>🎁 Daily Bonus Available!</div>
                <div style="font-size: 0.9rem;">Click to claim ₦1,000 + 100 Trivia Points + Nigerian Voice Experience</div>
            </div>

            <div class="bet-section">
                <label for="betAmount">Bet Amount (₦):</label><br>
                <input type="number" id="betAmount" class="bet-input" value="100" min="100" max="1000">
            </div>

            <div class="numbers-section">
                <h3>Choose your 5 lucky numbers (1-20):</h3>
                <button class="quick-pick" onclick="quickPick()">🎲 Quick Pick</button>
                <div class="number-inputs">
                    <input type="number" class="number-input" id="num1" min="1" max="20" placeholder="?">
                    <input type="number" class="number-input" id="num2" min="1" max="20" placeholder="?">
                    <input type="number" class="number-input" id="num3" min="1" max="20" placeholder="?">
                    <input type="number" class="number-input" id="num4" min="1" max="20" placeholder="?">
                    <input type="number" class="number-input" id="num5" min="1" max="20" placeholder="?">
                </div>
            </div>

            <button class="play-button" id="playButton" onclick="playNumbersGame()">
                🎯 PLAY NOW
            </button>

            <div class="results" id="results">
                <h3>Winning Numbers:</h3>
                <div class="winning-numbers" id="winningNumbers"></div>
                <div class="result-text" id="resultText"></div>
                <div class="payout" id="payout"></div>
            </div>

            <div class="rules">
                <h3>📋 Numbers Game Rules:</h3>
                <p><strong>In Order Matches:</strong> 2 numbers: 5x, 3 numbers: 10x, 4 numbers: 20x, 5 numbers: 50x</p>
                <p><strong>Out of Order:</strong> 1x + 1x per extra match</p>
            </div>
        </div>

        <!-- Football Predictor Tab -->
        <div id="football" class="tab-content">
            <!-- Football content abbreviated for space - same as before -->
            <div class="balance-stats">
                <div class="stat-card">
                    <div class="stat-value" id="predictionPointsDisplay">0</div>
                    <div class="stat-label">Prediction Points</div>
                </div>
            </div>
            <p style="opacity: 0.7;">Football predictor functionality preserved from previous version...</p>
        </div>

        <!-- Trivia Game Tab -->
        <div id="trivia" class="tab-content">
            <div class="balance-stats">
                <div class="stat-card">
                    <div class="stat-value" id="triviaPointsDisplay">0</div>
                    <div class="stat-label">Trivia Points</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="triviaScore">0</div>
                    <div class="stat-label">Current Score</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="triviaCorrect">0</div>
                    <div class="stat-label">Correct Answers</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="triviaStreak">0</div>
                    <div class="stat-label">Best Streak</div>
                </div>
            </div>

            <!-- Trivia Setup -->
            <div class="trivia-setup" id="triviaSetup">
                <h2>🧠 Choose Your Challenge</h2>
                <p style="margin-bottom: 2rem; opacity: 0.9;">Select a category and experience rapid-fire 5-second questions with authentic Nigerian/African voice-over! Complete answers and explanations guaranteed before auto-advance.</p>
                
                <div class="category-selection">
                    <button class="category-btn" onclick="selectCategory('random')" data-category="random">
                        🎲 <span>Random Mix</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('science')" data-category="science">
                        🔬 <span>Science</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('technology')" data-category="technology">
                        💻 <span>Technology</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('arts')" data-category="arts">
                        🎨 <span>Arts</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('music')" data-category="music">
                        🎵 <span>Music</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('film')" data-category="film">
                        🎬 <span>Film & TV</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('history')" data-category="history">
                        📚 <span>History</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('geography')" data-category="geography">
                        🌍 <span>Geography</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('sports')" data-category="sports">
                        ⚽ <span>Sports</span>
                    </button>
                    <button class="category-btn" onclick="selectCategory('literature')" data-category="literature">
                        📖 <span>Literature</span>
                    </button>
                </div>

                <button class="play-button" id="startTriviaBtn" onclick="startTriviaGame()" style="display: none;">
                    🚀 Start 15-Question Challenge
                </button>
            </div>

            <!-- Trivia Game -->
            <div class="trivia-game" id="triviaGameArea">
                <div class="question-header">
                    <div class="question-counter" id="questionCounter">Question 1 of 15</div>
                    <div class="timer-container">
                        <div class="timer" id="timer">5</div>
                        <div style="font-size: 0.9rem; opacity: 0.8;" id="timerStatus">seconds</div>
                        <button class="quick-pick" id="voiceToggle" onclick="toggleVoice()" style="margin-left: 1rem; padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                            🎙️ Nigerian Voice
                        </button>
                        <button class="quick-pick" id="soundToggle" onclick="toggleSound()" style="margin-left: 0.5rem; padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                            🎵 Sound ON
                        </button>
                        <button class="quick-pick" id="autoNextToggle" onclick="toggleAutoNext()" style="margin-left: 0.5rem; padding: 0.3rem 0.8rem; font-size: 0.8rem;">
                            ⚡ Auto Next ON
                        </button>
                    </div>
                </div>

                <div class="trivia-score" id="currentScore">Score: 0 points</div>

                <div class="question-card">
                    <div class="category-tag" id="questionCategory">Science</div>
                    <div class="question-text" id="questionText">
                        Loading question...
                    </div>
                    <div class="answers-grid" id="answersGrid">
                        <!-- Answer buttons will be generated here -->
                    </div>
                    <div class="explanation" id="explanation">
                        <!-- Explanation will appear here -->
                    </div>
                </div>

                <button class="next-question-btn" id="nextQuestionBtn" onclick="nextQuestion()">
                    ➡️ Next Question
                </button>
            </div>

            <!-- Game Complete -->
            <div class="game-complete" id="gameComplete">
                <h2>🎉 Round Complete!</h2>
                <div class="final-score" id="finalScore">0/15 Correct</div>
                <div id="performanceMessage" style="font-size: 1.1rem; margin-bottom: 1rem;"></div>
                <div id="pointsEarned" style="color: #ffd700; font-weight: bold; margin-bottom: 1rem;"></div>
                <button class="play-again-btn" onclick="resetTrivia()">🔄 Play Again</button>
            </div>

            <div class="rules">
                <h3>🧠 Trivia Rules:</h3>
                <p><strong>Scoring:</strong> Correct answer: +10 points, Speed bonus (3+ seconds left): +5 points</p>
                <p><strong>Time System:</strong> Question read aloud first, then 5-second TikTok countdown begins</p>
                <p><strong>Audio:</strong> Authentic Nigerian/African voice-over reads complete answers and explanations</p>
                <p><strong>Voice Priority:</strong> Nigerian → Other African → No European/American voices</p>
                <p><strong>Auto Next:</strong> Waits for COMPLETE answer and explanation to finish, then advances automatically</p>
                <p><strong>Smart Timing:</strong> Auto-advance only starts after voice finishes speaking (no cutting off explanations)</p>
                <p><strong>Controls:</strong> Toggle Nigerian voice, sound effects, and auto-advance independently</p>
                <p><strong>Round:</strong> 15 questions per game across multiple African and global disciplines</p>
            </div>
        </div>

        <!-- Achievements Tab -->
        <div id="achievements" class="tab-content">
            <h2>🏆 Achievements</h2>
            <div id="achievementsList"></div>
        </div>

        <!-- Stats Tab -->
        <div id="stats" class="tab-content">
            <h2>📊 Your Statistics</h2>
            <div class="balance-stats">
                <div class="stat-card">
                    <div class="stat-value" id="gamesPlayed">0</div>
                    <div class="stat-label">Games Played</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalTriviaGames">0</div>
                    <div class="stat-label">Trivia Games</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="triviaAccuracy">0%</div>
                    <div class="stat-label">Trivia Accuracy</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="totalWinnings">0</div>
                    <div class="stat-label">Total Winnings (₦)</div>
                </div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification"></div>

    <script>
        // Game state
        let gameData = {
            balance: 10000,
            level: 1,
            winStreak: 0,
            totalWins: 0,
            gamesPlayed: 0,
            totalWinnings: 0,
            biggestWin: 0,
            lastDailyBonus: null,
            achievements: {},
            numberFrequency: {},
            startDate: new Date().toDateString(),
            
            // Trivia game data
            triviaPoints: 0,
            totalTriviaGames: 0,
            totalTriviaQuestions: 0,
            totalTriviaCorrect: 0,
            bestTriviaStreak: 0,
            
            // Current trivia session
            currentTriviaScore: 0,
            currentTriviaCorrect: 0,
            currentTriviaQuestion: 0,
            currentCategory: null,
            triviaAnswers: [],
            triviaTimer: null,
            timeLeft: 5,
            voiceEnabled: true,
            selectedVoice: null,
            soundEnabled: true,
            autoNext: true
        };

        // Massive trivia question database
        const triviaQuestions = {
            science: [
                {
                    question: "What is the chemical symbol for gold?",
                    answers: ["Au", "Ag", "Go", "Gd"],
                    correct: 0,
                    explanation: "Au comes from the Latin word 'aurum' meaning gold."
                },
                {
                    question: "How many chambers does a human heart have?",
                    answers: ["2", "3", "4", "5"],
                    correct: 2,
                    explanation: "The human heart has 4 chambers: 2 atria and 2 ventricles."
                },
                {
                    question: "What is the fastest land animal?",
                    answers: ["Lion", "Cheetah", "Leopard", "Horse"],
                    correct: 1,
                    explanation: "Cheetahs can reach speeds up to 70 mph (112 km/h)."
                },
                {
                    question: "What gas makes up about 78% of Earth's atmosphere?",
                    answers: ["Oxygen", "Carbon Dioxide", "Nitrogen", "Argon"],
                    correct: 2,
                    explanation: "Nitrogen makes up about 78% of Earth's atmosphere."
                },
                {
                    question: "How many bones are in an adult human body?",
                    answers: ["206", "195", "218", "232"],
                    correct: 0,
                    explanation: "An adult human body has 206 bones."
                },
                {
                    question: "What is the hardest natural substance on Earth?",
                    answers: ["Gold", "Iron", "Diamond", "Platinum"],
                    correct: 2,
                    explanation: "Diamond is the hardest naturally occurring substance."
                },
                {
                    question: "What planet is known as the Red Planet?",
                    answers: ["Venus", "Mars", "Jupiter", "Saturn"],
                    correct: 1,
                    explanation: "Mars is called the Red Planet due to iron oxide on its surface."
                },
                {
                    question: "What is the speed of light in vacuum?",
                    answers: ["299,792,458 m/s", "300,000,000 m/s", "186,000 mi/s", "All correct"],
                    correct: 3,
                    explanation: "All these values represent the speed of light in different units."
                }
            ],
            technology: [
                {
                    question: "Who founded Microsoft?",
                    answers: ["Steve Jobs", "Bill Gates", "Mark Zuckerberg", "Larry Page"],
                    correct: 1,
                    explanation: "Bill Gates co-founded Microsoft with Paul Allen in 1975."
                },
                {
                    question: "What does 'HTTP' stand for?",
                    answers: ["HyperText Transfer Protocol", "Home Tool Transfer Protocol", "Hyperlink Text Transfer Protocol", "Host Transfer Text Protocol"],
                    correct: 0,
                    explanation: "HTTP stands for HyperText Transfer Protocol."
                },
                {
                    question: "In which year was the first iPhone released?",
                    answers: ["2006", "2007", "2008", "2009"],
                    correct: 1,
                    explanation: "The first iPhone was released by Apple in 2007."
                },
                {
                    question: "What does 'AI' stand for in technology?",
                    answers: ["Automated Intelligence", "Artificial Intelligence", "Advanced Intelligence", "Algorithmic Intelligence"],
                    correct: 1,
                    explanation: "AI stands for Artificial Intelligence."
                },
                {
                    question: "Which company developed the Android operating system?",
                    answers: ["Apple", "Microsoft", "Google", "Samsung"],
                    correct: 2,
                    explanation: "Google developed the Android operating system."
                },
                {
                    question: "What does 'RAM' stand for in computing?",
                    answers: ["Random Access Memory", "Rapid Access Memory", "Real Access Memory", "Remote Access Memory"],
                    correct: 0,
                    explanation: "RAM stands for Random Access Memory."
                }
            ],
            arts: [
                {
                    question: "Who painted the Mona Lisa?",
                    answers: ["Vincent van Gogh", "Pablo Picasso", "Leonardo da Vinci", "Michelangelo"],
                    correct: 2,
                    explanation: "Leonardo da Vinci painted the Mona Lisa between 1503-1519."
                },
                {
                    question: "Which art movement is Salvador Dalí associated with?",
                    answers: ["Impressionism", "Surrealism", "Cubism", "Abstract Expressionism"],
                    correct: 1,
                    explanation: "Salvador Dalí was a prominent Surrealist artist."
                },
                {
                    question: "What is the art of paper folding called?",
                    answers: ["Kirigami", "Origami", "Papyrus", "Collage"],
                    correct: 1,
                    explanation: "Origami is the Japanese art of paper folding."
                },
                {
                    question: "Who sculpted 'The Thinker'?",
                    answers: ["Auguste Rodin", "Michelangelo", "Donatello", "Bernini"],
                    correct: 0,
                    explanation: "Auguste Rodin sculpted 'The Thinker' in 1904."
                },
                {
                    question: "Which museum houses the Mona Lisa?",
                    answers: ["British Museum", "Metropolitan Museum", "Louvre Museum", "Uffizi Gallery"],
                    correct: 2,
                    explanation: "The Mona Lisa is housed in the Louvre Museum in Paris."
                }
            ],
            music: [
                {
                    question: "How many strings does a standard guitar have?",
                    answers: ["4", "5", "6", "7"],
                    correct: 2,
                    explanation: "A standard guitar has 6 strings."
                },
                {
                    question: "Which composer wrote 'The Four Seasons'?",
                    answers: ["Mozart", "Beethoven", "Vivaldi", "Bach"],
                    correct: 2,
                    explanation: "Antonio Vivaldi composed 'The Four Seasons' around 1720."
                },
                {
                    question: "What does 'forte' mean in music?",
                    answers: ["Soft", "Loud", "Fast", "Slow"],
                    correct: 1,
                    explanation: "Forte means to play loudly in music."
                },
                {
                    question: "Which instrument is Yo-Yo Ma famous for playing?",
                    answers: ["Violin", "Piano", "Cello", "Flute"],
                    correct: 2,
                    explanation: "Yo-Yo Ma is a world-renowned cellist."
                },
                {
                    question: "How many keys are on a standard piano?",
                    answers: ["76", "88", "92", "96"],
                    correct: 1,
                    explanation: "A standard piano has 88 keys (52 white and 36 black)."
                }
            ],
            film: [
                {
                    question: "Which movie won the first Academy Award for Best Picture?",
                    answers: ["Wings", "The Jazz Singer", "Sunrise", "The Circus"],
                    correct: 0,
                    explanation: "Wings won the first Academy Award for Best Picture in 1929."
                },
                {
                    question: "Who directed the movie 'Jaws'?",
                    answers: ["George Lucas", "Steven Spielberg", "Martin Scorsese", "Francis Ford Coppola"],
                    correct: 1,
                    explanation: "Steven Spielberg directed Jaws in 1975."
                },
                {
                    question: "Which film features the quote 'May the Force be with you'?",
                    answers: ["Star Trek", "Star Wars", "Guardians of the Galaxy", "Interstellar"],
                    correct: 1,
                    explanation: "'May the Force be with you' is from Star Wars."
                },
                {
                    question: "What is the highest-grossing film of all time?",
                    answers: ["Titanic", "Avatar", "Avengers: Endgame", "Avatar: The Way of Water"],
                    correct: 1,
                    explanation: "Avatar (2009) is the highest-grossing film of all time."
                }
            ],
            history: [
                {
                    question: "In which year did World War II end?",
                    answers: ["1944", "1945", "1946", "1947"],
                    correct: 1,
                    explanation: "World War II ended in 1945."
                },
                {
                    question: "Who was the first person to walk on the moon?",
                    answers: ["Buzz Aldrin", "Neil Armstrong", "John Glenn", "Alan Shepard"],
                    correct: 1,
                    explanation: "Neil Armstrong was the first person to walk on the moon in 1969."
                },
                {
                    question: "Which ancient wonder of the world was located in Alexandria?",
                    answers: ["Hanging Gardens", "Lighthouse", "Colossus", "Mausoleum"],
                    correct: 1,
                    explanation: "The Lighthouse of Alexandria was one of the Seven Wonders."
                },
                {
                    question: "Who was the first President of the United States?",
                    answers: ["Thomas Jefferson", "John Adams", "George Washington", "Benjamin Franklin"],
                    correct: 2,
                    explanation: "George Washington was the first President of the United States."
                }
            ],
            geography: [
                {
                    question: "What is the capital of Australia?",
                    answers: ["Sydney", "Melbourne", "Canberra", "Perth"],
                    correct: 2,
                    explanation: "Canberra is the capital of Australia."
                },
                {
                    question: "Which is the longest river in the world?",
                    answers: ["Amazon", "Nile", "Mississippi", "Yangtze"],
                    correct: 1,
                    explanation: "The Nile River is the longest river in the world."
                },
                {
                    question: "How many continents are there?",
                    answers: ["5", "6", "7", "8"],
                    correct: 2,
                    explanation: "There are 7 continents: Asia, Africa, North America, South America, Antarctica, Europe, and Australia/Oceania."
                },
                {
                    question: "Which country has the most natural lakes?",
                    answers: ["Finland", "Sweden", "Canada", "Russia"],
                    correct: 2,
                    explanation: "Canada has the most natural lakes in the world."
                }
            ],
            sports: [
                {
                    question: "How many players are on a basketball team on the court at once?",
                    answers: ["4", "5", "6", "7"],
                    correct: 1,
                    explanation: "There are 5 players per team on the basketball court at once."
                },
                {
                    question: "In which sport would you perform a slam dunk?",
                    answers: ["Volleyball", "Tennis", "Basketball", "Football"],
                    correct: 2,
                    explanation: "A slam dunk is performed in basketball."
                },
                {
                    question: "How often are the Summer Olympic Games held?",
                    answers: ["Every 2 years", "Every 3 years", "Every 4 years", "Every 5 years"],
                    correct: 2,
                    explanation: "The Summer Olympic Games are held every 4 years."
                },
                {
                    question: "Which country has won the most FIFA World Cups?",
                    answers: ["Argentina", "Germany", "Brazil", "Italy"],
                    correct: 2,
                    explanation: "Brazil has won the most FIFA World Cups with 5 titles."
                }
            ],
            literature: [
                {
                    question: "Who wrote 'Romeo and Juliet'?",
                    answers: ["Charles Dickens", "William Shakespeare", "Jane Austen", "Mark Twain"],
                    correct: 1,
                    explanation: "William Shakespeare wrote Romeo and Juliet."
                },
                {
                    question: "Which book begins with 'It was the best of times, it was the worst of times'?",
                    answers: ["Great Expectations", "A Tale of Two Cities", "Oliver Twist", "David Copperfield"],
                    correct: 1,
                    explanation: "A Tale of Two Cities by Charles Dickens begins with this famous line."
                },
                {
                    question: "Who wrote '1984'?",
                    answers: ["Aldous Huxley", "Ray Bradbury", "George Orwell", "H.G. Wells"],
                    correct: 2,
                    explanation: "George Orwell wrote the dystopian novel 1984."
                },
                {
                    question: "Which novel features the character Atticus Finch?",
                    answers: ["To Kill a Mockingbird", "Of Mice and Men", "The Grapes of Wrath", "The Great Gatsby"],
                    correct: 0,
                    explanation: "Atticus Finch is a character in To Kill a Mockingbird by Harper Lee."
                }
            ]
        };

        // Load and save functions
        function loadGameData() {
            const saved = localStorage.getItem('ultimateGamingHub');
            if (saved) {
                gameData = { ...gameData, ...JSON.parse(saved) };
            }
            initializeVoice();
        }

        function saveGameData() {
            localStorage.setItem('ultimateGamingHub', JSON.stringify(gameData));
        }

        // Voice synthesis functions
        function initializeVoice() {
            if ('speechSynthesis' in window) {
                // Wait for voices to load
                setTimeout(() => {
                    const voices = speechSynthesis.getVoices();
                    
                    // Look for African voices first
                    let africanVoice = voices.find(voice => 
                        voice.name.includes('South Africa') || 
                        voice.name.includes('Nigeria') || 
                        voice.name.includes('Kenya') ||
                        voice.lang.includes('en-ZA') || 
                        voice.lang.includes('en-NG') ||
                        voice.lang.includes('en-KE')
                    );
                    
                    // If no African voice, look for UK/Australian voices (closer accent)
                    if (!africanVoice) {
                        africanVoice = voices.find(voice => 
                            voice.lang.includes('en-GB') || 
                            voice.lang.includes('en-AU') ||
                            voice.name.includes('British') ||
                            voice.name.includes('UK')
                        );
                    }
                    
                    // Fallback to any English voice
                    if (!africanVoice) {
                        africanVoice = voices.find(voice => voice.lang.startsWith('en'));
                    }
                    
                    gameData.selectedVoice = africanVoice;
                    console.log('Selected voice:', africanVoice?.name);
                }, 100);
            }
        }

        // TikTok-style countdown sound
        function playCountdownSound() {
            if (!gameData.soundEnabled) return;
            
            try {
                // Create audio context for sound generation
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create a short, punchy beep sound like TikTok
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // TikTok-style sound: quick high-pitched beep with drop
                oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(400, audioContext.currentTime + 0.1);
                
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.15);
                
                oscillator.type = 'sine';
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.15);
                
                // Add a second quick beep for emphasis
                setTimeout(() => {
                    const oscillator2 = audioContext.createOscillator();
                    const gainNode2 = audioContext.createGain();
                    
                    oscillator2.connect(gainNode2);
                    gainNode2.connect(audioContext.destination);
                    
                    oscillator2.frequency.setValueAtTime(600, audioContext.currentTime);
                    gainNode2.gain.setValueAtTime(0.2, audioContext.currentTime);
                    gainNode2.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                    
                    oscillator2.type = 'sine';
                    oscillator2.start(audioContext.currentTime);
                    oscillator2.stop(audioContext.currentTime + 0.1);
                }, 80);
                
            } catch (error) {
                console.log('Audio not supported');
            }
        }

        // Timer tick sound for each second
        function playTickSound() {
            if (!gameData.soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Quick tick sound
                oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
                
                oscillator.type = 'square';
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.05);
            } catch (error) {
                console.log('Audio not supported');
            }
        }

        // Warning sound for last 3 seconds
        function playWarningSound() {
            if (!gameData.soundEnabled) return;
            
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                // Urgent beep
                oscillator.frequency.setValueAtTime(1000, audioContext.currentTime);
                gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
                
                oscillator.type = 'sawtooth';
                oscillator.start(audioContext.currentTime);
                oscillator.stop(audioContext.currentTime + 0.1);
            } catch (error) {
                console.log('Audio not supported');
            }
        }

        function speakText(text) {
            if (!gameData.voiceEnabled || !('speechSynthesis' in window)) return;
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            const utterance = new SpeechSynthesisUtterance(text);
            
            if (gameData.selectedVoice) {
                utterance.voice = gameData.selectedVoice;
            }
            
            // Configure speech parameters for African accent feel
            utterance.rate = 0.85; // Slightly slower, more deliberate
            utterance.pitch = 1.1; // Slightly higher pitch
            utterance.volume = 0.8;
            
            speechSynthesis.speak(utterance);
        }

        function toggleVoice() {
            // Check if African voice is available
            if (!gameData.selectedVoice) {
                showNotification('❌ No African voices available. Please enable Nigerian/African voices in your device settings.', 4000);
                return;
            }
            
            gameData.voiceEnabled = !gameData.voiceEnabled;
            const button = document.getElementById('voiceToggle');
            
            if (gameData.voiceEnabled) {
                button.textContent = '🎙️ Nigerian Voice ON';
                button.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                showNotification(`🎙️ African voice enabled! Using ${gameData.selectedVoice.name}`);
            } else {
                button.textContent = '🔇 Voice OFF';
                button.style.background = 'linear-gradient(45deg, #6c757d, #adb5bd)';
                speechSynthesis.cancel(); // Stop any current speech
                showNotification('🔇 African voice disabled');
            }
            
            saveGameData();
        }

        function toggleSound() {
            gameData.soundEnabled = !gameData.soundEnabled;
            const button = document.getElementById('soundToggle');
            
            if (gameData.soundEnabled) {
                button.textContent = '🎵 Sound ON';
                button.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                showNotification('🎵 Sound effects enabled!');
                
                // Play test sound
                setTimeout(() => {
                    playCountdownSound();
                }, 500);
            } else {
                button.textContent = '🔇 Sound OFF';
                button.style.background = 'linear-gradient(45deg, #6c757d, #adb5bd)';
                showNotification('🔇 Sound effects disabled');
            }
            
            saveGameData();
        }

        function toggleAutoNext() {
            gameData.autoNext = !gameData.autoNext;
            const button = document.getElementById('autoNextToggle');
            
            if (gameData.autoNext) {
                button.textContent = '⚡ Auto Next ON';
                button.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                showNotification('⚡ Auto Next enabled! Questions will advance automatically');
            } else {
                button.textContent = '👆 Manual Next';
                button.style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
                showNotification('👆 Manual mode! Click Next Question to continue');
            }
            
            saveGameData();
        }

        // Utility functions
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'achievements') {
                renderAchievements();
            } else if (tabName === 'stats') {
                updateStats();
            } else if (tabName === 'trivia') {
                updateTriviaDisplay();
            }
        }

        function showNotification(message, duration = 3000) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, duration);
        }

        function updateDisplay() {
            document.getElementById('balance').textContent = gameData.balance.toLocaleString();
            document.getElementById('level').textContent = gameData.level;
            document.getElementById('winStreak').textContent = gameData.winStreak;
            document.getElementById('triviaPoints').textContent = gameData.triviaPoints;
        }

        function updateTriviaDisplay() {
            document.getElementById('triviaPointsDisplay').textContent = gameData.triviaPoints;
            document.getElementById('triviaScore').textContent = gameData.currentTriviaScore;
            document.getElementById('triviaCorrect').textContent = gameData.currentTriviaCorrect;
            document.getElementById('triviaStreak').textContent = gameData.bestTriviaStreak;
        }

        function updateStats() {
            document.getElementById('gamesPlayed').textContent = gameData.gamesPlayed;
            document.getElementById('totalTriviaGames').textContent = gameData.totalTriviaGames;
            document.getElementById('totalWinnings').textContent = gameData.totalWinnings.toLocaleString();
            
            const triviaAccuracy = gameData.totalTriviaQuestions > 0 ? 
                Math.round((gameData.totalTriviaCorrect / gameData.totalTriviaQuestions) * 100) : 0;
            document.getElementById('triviaAccuracy').textContent = `${triviaAccuracy}%`;
        }

        function claimDailyBonus() {
            const today = new Date().toDateString();
            if (gameData.lastDailyBonus === today) return;

            gameData.balance += 1000;
            gameData.triviaPoints += 100;
            gameData.lastDailyBonus = today;
            
            document.getElementById('dailyBonus').classList.add('claimed');
            document.getElementById('dailyBonus').innerHTML = `
                <div>✅ Daily Bonus Claimed!</div>
                <div style="font-size: 0.9rem;">Come back tomorrow for more</div>
            `;
            
            showNotification('🎁 Daily bonus claimed! +₦1,000 + 100 Trivia Points');
            updateDisplay();
            saveGameData();
        }

        // Trivia game functions
        function selectCategory(category) {
            // Remove previous selection
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            
            // Add selection to clicked button
            event.target.classList.add('selected');
            gameData.currentCategory = category;
            
            // Show start button
            document.getElementById('startTriviaBtn').style.display = 'inline-block';
        }

        function startTriviaGame() {
            gameData.currentTriviaScore = 0;
            gameData.currentTriviaCorrect = 0;
            gameData.currentTriviaQuestion = 0;
            gameData.triviaAnswers = [];
            
            // Hide setup, show game
            document.getElementById('triviaSetup').style.display = 'none';
            document.getElementById('triviaGameArea').classList.add('active');
            
            nextQuestion();
        }

        function getRandomQuestion() {
            const categories = Object.keys(triviaQuestions);
            let selectedCategory;
            
            if (gameData.currentCategory === 'random') {
                selectedCategory = categories[Math.floor(Math.random() * categories.length)];
            } else {
                selectedCategory = gameData.currentCategory;
            }
            
            const categoryQuestions = triviaQuestions[selectedCategory];
            const randomQuestion = categoryQuestions[Math.floor(Math.random() * categoryQuestions.length)];
            
            return {
                ...randomQuestion,
                category: selectedCategory
            };
        }

        function nextQuestion() {
            if (gameData.currentTriviaQuestion >= 15) {
                endTriviaGame();
                return;
            }
            
            gameData.currentTriviaQuestion++;
            const question = getRandomQuestion();
            
            // Update UI
            document.getElementById('questionCounter').textContent = `Question ${gameData.currentTriviaQuestion} of 15`;
            document.getElementById('currentScore').textContent = `Score: ${gameData.currentTriviaScore} points`;
            document.getElementById('questionCategory').textContent = question.category.charAt(0).toUpperCase() + question.category.slice(1);
            document.getElementById('questionText').textContent = question.question;
            
            // Create answer buttons
            const answersGrid = document.getElementById('answersGrid');
            answersGrid.innerHTML = '';
            
            question.answers.forEach((answer, index) => {
                const button = document.createElement('button');
                button.className = 'answer-btn';
                button.textContent = answer;
                button.onclick = () => selectAnswer(index, question);
                answersGrid.appendChild(button);
            });
            
            // Hide explanation and next button
            document.getElementById('explanation').classList.remove('show');
            const nextBtn = document.getElementById('nextQuestionBtn');
            nextBtn.classList.remove('show');
            
            // Reset next button to default state
            nextBtn.textContent = '➡️ Next Question';
            nextBtn.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
            nextBtn.onclick = () => nextQuestion();
            
            // Show "Listening..." state on timer
            const timer = document.getElementById('timer');
            const timerStatus = document.getElementById('timerStatus');
            timer.textContent = '🎙️';
            timer.classList.add('listening');
            timer.classList.remove('warning');
            timerStatus.textContent = 'Listening...';
            
            // Read question aloud first, then start timer
            setTimeout(() => {
                readQuestionAloud(question);
            }, 500);
            
            gameData.currentQuestion = question;
        }

        function readQuestionAloud(question) {
            if (!gameData.voiceEnabled || !('speechSynthesis' in window)) {
                // If voice disabled, start timer immediately
                startTimer(question);
                return;
            }
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            const fullText = `Question ${gameData.currentTriviaQuestion}. Category: ${question.category}. ${question.question}. Your options are: Option A, ${question.answers[0]}. Option B, ${question.answers[1]}. Option C, ${question.answers[2]}. Option D, ${question.answers[3]}. Get ready, your 10 seconds start... now!`;
            
            const utterance = new SpeechSynthesisUtterance(fullText);
            
            if (gameData.selectedVoice) {
                utterance.voice = gameData.selectedVoice;
            }
            
            // Configure speech parameters for African accent feel
            utterance.rate = 0.8; // Slightly slower for clarity
            utterance.pitch = 1.1;
            utterance.volume = 0.9;
            
            // Start timer only AFTER speech ends
            utterance.onend = () => {
                startTimer(question);
            };
            
            // Fallback: start timer after maximum expected speech time
            setTimeout(() => {
                if (gameData.timeLeft === 10) { // Timer hasn't started yet
                    startTimer(question);
                }
            }, 15000); // 15 second fallback
            
            speechSynthesis.speak(utterance);
        }

        function startTimer(question) {
            gameData.timeLeft = 5;
            
            // Remove listening state
            const timer = document.getElementById('timer');
            const timerStatus = document.getElementById('timerStatus');
            timer.classList.remove('listening');
            timer.classList.add('countdown-start'); // Add countdown start animation
            timerStatus.textContent = 'seconds';
            
            // Remove countdown start animation after it completes
            setTimeout(() => {
                timer.classList.remove('countdown-start');
            }, 500);
            
            // Play TikTok-style countdown start sound
            playCountdownSound();
            
            // Show countdown starting notification
            showNotification('⏰ Timer started! 5 seconds to answer!', 2000);
            
            console.log('5-second timer started for question');
            updateTimerDisplay();
            
            gameData.triviaTimer = setInterval(() => {
                gameData.timeLeft--;
                updateTimerDisplay();
                
                // Play tick sound for each second
                if (gameData.timeLeft > 0) {
                    if (gameData.timeLeft <= 2) {
                        playWarningSound(); // Urgent sound for last 2 seconds
                    } else {
                        playTickSound(); // Regular tick sound
                    }
                }
                
                if (gameData.timeLeft <= 0) {
                    clearInterval(gameData.triviaTimer);
                    console.log('5-second timer ended');
                    timeUp(question);
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const timer = document.getElementById('timer');
            timer.textContent = gameData.timeLeft;
            
            // Update timer visual
            const percentage = (gameData.timeLeft / 5) * 100;
            const degrees = (percentage / 100) * 360;
            
            if (gameData.timeLeft <= 2) {
                timer.classList.add('warning');
            } else {
                timer.classList.remove('warning');
            }
            
            // Different colors for different states
            if (gameData.timeLeft >= 4) {
                timer.style.background = `conic-gradient(#28a745 ${degrees}deg, rgba(255, 255, 255, 0.2) ${degrees}deg)`;
            } else if (gameData.timeLeft >= 3) {
                timer.style.background = `conic-gradient(#ffc107 ${degrees}deg, rgba(255, 255, 255, 0.2) ${degrees}deg)`;
            } else {
                timer.style.background = `conic-gradient(#dc3545 ${degrees}deg, rgba(255, 255, 255, 0.2) ${degrees}deg)`;
            }
        }

        function selectAnswer(selectedIndex, question) {
            clearInterval(gameData.triviaTimer);
            speechSynthesis.cancel(); // Stop voice if still speaking
            
            // Disable all buttons
            document.querySelectorAll('.answer-btn').forEach((btn, index) => {
                btn.classList.add('disabled');
                
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && selectedIndex !== question.correct) {
                    btn.classList.add('incorrect');
                }
            });
            
            // Calculate score
            let points = 0;
            if (selectedIndex === question.correct) {
                points = 10;
                if (gameData.timeLeft >= 3) points += 5; // Speed bonus for 3+ seconds left
                
                gameData.currentTriviaScore += points;
                gameData.currentTriviaCorrect++;
                gameData.totalTriviaCorrect++;
                
                showNotification(`✅ Correct! +${points} points`);
            } else {
                showNotification('❌ Incorrect!');
            }
            
            gameData.totalTriviaQuestions++;
            
            // Show explanation
            const explanation = document.getElementById('explanation');
            explanation.innerHTML = `<strong>Correct Answer:</strong> ${question.answers[question.correct]}<br><strong>Explanation:</strong> ${question.explanation}`;
            explanation.classList.add('show');
            
            // Read answer and explanation with proper completion detection
            readAnswerAndExplanation(selectedIndex, question);
            
            updateTriviaDisplay();
            saveGameData();
        }

        function timeUp(question) {
            speechSynthesis.cancel(); // Stop voice if still speaking
            
            // Auto-select wrong answer (show correct)
            document.querySelectorAll('.answer-btn').forEach((btn, index) => {
                btn.classList.add('disabled');
                if (index === question.correct) {
                    btn.classList.add('correct');
                }
            });
            
            gameData.totalTriviaQuestions++;
            
            // Show explanation
            const explanation = document.getElementById('explanation');
            explanation.innerHTML = `<strong>Time's up!</strong><br><strong>Correct Answer:</strong> ${question.answers[question.correct]}<br><strong>Explanation:</strong> ${question.explanation}`;
            explanation.classList.add('show');
            
            // Read time's up message with complete answer and explanation
            readTimeUpResponse(question);
            
            showNotification('⏰ Time\'s up!');
            saveGameData();
        }

        function readAnswerAndExplanation(selectedIndex, question) {
            if (!gameData.voiceEnabled || !('speechSynthesis' in window) || !gameData.selectedVoice) {
                // If voice disabled, show manual next button or auto-advance immediately
                handleNoVoiceResponse();
                return;
            }
            
            const correctAnswer = question.answers[question.correct];
            let answerText;
            
            if (selectedIndex === question.correct) {
                answerText = `Correct! The answer is ${correctAnswer}. Well done!`;
            } else {
                answerText = `Incorrect. The correct answer is ${correctAnswer}.`;
            }
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            // Read answer feedback first
            const answerUtterance = new SpeechSynthesisUtterance(answerText);
            configureVoice(answerUtterance);
            
            let answerCompleted = false;
            let explanationCompleted = false;
            
            answerUtterance.onend = () => {
                answerCompleted = true;
                console.log('Answer reading completed');
                // Wait a moment, then read the explanation
                setTimeout(() => {
                    readExplanationThenAdvance(question);
                }, 800);
            };
            
            // Fallback in case onend doesn't fire
            setTimeout(() => {
                if (!answerCompleted) {
                    console.log('Answer reading fallback triggered');
                    answerCompleted = true;
                    readExplanationThenAdvance(question);
                }
            }, Math.max(3000, answerText.length * 80)); // Dynamic fallback based on text length
            
            speechSynthesis.speak(answerUtterance);
        }

        function readTimeUpResponse(question) {
            if (!gameData.voiceEnabled || !('speechSynthesis' in window) || !gameData.selectedVoice) {
                // If voice disabled, show manual next button or auto-advance immediately
                handleNoVoiceResponse();
                return;
            }
            
            const correctAnswer = question.answers[question.correct];
            const answerText = `Time's up! The correct answer was ${correctAnswer}.`;
            const explanationText = question.explanation;
            
            // Cancel any ongoing speech
            speechSynthesis.cancel();
            
            // Read time's up message first
            const answerUtterance = new SpeechSynthesisUtterance(answerText);
            configureVoice(answerUtterance);
            
            let answerCompleted = false;
            
            answerUtterance.onend = () => {
                answerCompleted = true;
                console.log('Time up answer reading completed');
                // Wait a moment, then read the explanation
                setTimeout(() => {
                    readFinalExplanation(explanationText);
                }, 800);
            };
            
            // Fallback in case onend doesn't fire
            setTimeout(() => {
                if (!answerCompleted) {
                    console.log('Time up answer reading fallback triggered');
                    answerCompleted = true;
                    readFinalExplanation(explanationText);
                }
            }, Math.max(3000, answerText.length * 80));
            
            speechSynthesis.speak(answerUtterance);
        }

        function readExplanationThenAdvance(question) {
            if (!question.explanation || question.explanation.trim() === '') {
                // No explanation to read, advance immediately
                console.log('No explanation to read, advancing');
                handleAdvanceAfterVoice();
                return;
            }
            
            const explanationUtterance = new SpeechSynthesisUtterance(question.explanation);
            configureVoice(explanationUtterance);
            
            let explanationCompleted = false;
            
            explanationUtterance.onend = () => {
                explanationCompleted = true;
                console.log('Explanation reading completed');
                // After explanation is completely read, handle auto-advance or manual next
                handleAdvanceAfterVoice();
            };
            
            // Robust fallback based on explanation length
            const estimatedTime = Math.max(4000, question.explanation.length * 80); // 80ms per character
            setTimeout(() => {
                if (!explanationCompleted) {
                    console.log('Explanation reading fallback triggered after', estimatedTime, 'ms');
                    explanationCompleted = true;
                    handleAdvanceAfterVoice();
                }
            }, estimatedTime);
            
            speechSynthesis.speak(explanationUtterance);
        }

        function readFinalExplanation(explanationText) {
            if (!explanationText || explanationText.trim() === '') {
                // No explanation to read, advance immediately
                console.log('No explanation for time up, advancing');
                handleAdvanceAfterVoice();
                return;
            }
            
            const explanationUtterance = new SpeechSynthesisUtterance(explanationText);
            configureVoice(explanationUtterance);
            
            let explanationCompleted = false;
            
            explanationUtterance.onend = () => {
                explanationCompleted = true;
                console.log('Final explanation reading completed');
                handleAdvanceAfterVoice();
            };
            
            // Robust fallback based on explanation length
            const estimatedTime = Math.max(4000, explanationText.length * 80);
            setTimeout(() => {
                if (!explanationCompleted) {
                    console.log('Final explanation reading fallback triggered after', estimatedTime, 'ms');
                    explanationCompleted = true;
                    handleAdvanceAfterVoice();
                }
            }, estimatedTime);
            
            speechSynthesis.speak(explanationUtterance);
        }

        function configureVoice(utterance) {
            if (gameData.selectedVoice) {
                utterance.voice = gameData.selectedVoice;
            }
            utterance.rate = 0.8;
            utterance.pitch = 1.2;
            utterance.volume = 0.9;
        }

        function handleAdvanceAfterVoice() {
            if (gameData.autoNext) {
                // Auto advance after voice completes with a 3-second countdown
                setTimeout(() => {
                    showAutoAdvanceCountdown(3);
                }, 500);
                
                // Auto advance after countdown
                setTimeout(() => {
                    nextQuestion();
                }, 4000); // 500ms + 3000ms countdown
            } else {
                // Show manual next button
                setTimeout(() => {
                    document.getElementById('nextQuestionBtn').classList.add('show');
                }, 500);
            }
        }

        function handleNoVoiceResponse() {
            if (gameData.autoNext) {
                // Auto advance after 2 seconds if no voice
                setTimeout(() => {
                    nextQuestion();
                }, 2000);
                
                // Show countdown
                setTimeout(() => {
                    showAutoAdvanceCountdown(2);
                }, 100);
            } else {
                // Show manual next button immediately
                setTimeout(() => {
                    document.getElementById('nextQuestionBtn').classList.add('show');
                }, 500);
            }
        }

        function showAutoAdvanceCountdown() {
            const nextBtn = document.getElementById('nextQuestionBtn');
            nextBtn.classList.add('show', 'auto-advancing');
            
            let countdown = 4;
            const countdownInterval = setInterval(() => {
                nextBtn.textContent = `⚡ Auto Next in ${countdown}s (click to skip)`;
                countdown--;
                
                if (countdown < 0) {
                    clearInterval(countdownInterval);
                    nextBtn.classList.remove('auto-advancing');
                    nextBtn.textContent = '➡️ Next Question';
                    nextBtn.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                }
            }, 1000);
            
            // Allow manual skip
            nextBtn.onclick = () => {
                clearInterval(countdownInterval);
                nextBtn.classList.remove('auto-advancing');
                nextQuestion();
            };
        }

        function endTriviaGame() {
            document.getElementById('triviaGameArea').classList.remove('active');
            
            // Calculate performance
            const percentage = Math.round((gameData.currentTriviaCorrect / 15) * 100);
            let performanceMessage = '';
            let pointsBonus = 0;
            
            if (percentage >= 90) {
                performanceMessage = '🎉 Brilliant! You\'re a trivia master!';
                pointsBonus = 100;
            } else if (percentage >= 75) {
                performanceMessage = '🌟 Excellent! Great knowledge!';
                pointsBonus = 75;
            } else if (percentage >= 60) {
                performanceMessage = '👍 Good job! Keep learning!';
                pointsBonus = 50;
            } else if (percentage >= 40) {
                performanceMessage = '📚 Not bad! Room for improvement!';
                pointsBonus = 25;
            } else {
                performanceMessage = '💪 Keep practicing! You\'ll get better!';
                pointsBonus = 10;
            }
            
            // Update streak
            if (gameData.currentTriviaCorrect > gameData.bestTriviaStreak) {
                gameData.bestTriviaStreak = gameData.currentTriviaCorrect;
            }
            
            // Add bonus points
            gameData.triviaPoints += pointsBonus;
            gameData.totalTriviaGames++;
            
            // Show results
            document.getElementById('finalScore').textContent = `${gameData.currentTriviaCorrect}/15 Correct (${percentage}%)`;
            document.getElementById('performanceMessage').textContent = performanceMessage;
            document.getElementById('pointsEarned').textContent = `+${pointsBonus} Trivia Points Earned!`;
            document.getElementById('gameComplete').classList.add('show');
            
            updateDisplay();
            updateTriviaDisplay();
            saveGameData();
        }

        function resetTrivia() {
            document.getElementById('gameComplete').classList.remove('show');
            document.getElementById('triviaSetup').style.display = 'block';
            document.getElementById('triviaGameArea').classList.remove('active');
            
            // Reset selections
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById('startTriviaBtn').style.display = 'none';
            
            gameData.currentCategory = null;
        }

        // Numbers game functions (preserved from previous version)
        function quickPick() {
            const numbers = [];
            while (numbers.length < 5) {
                const num = Math.floor(Math.random() * 20) + 1;
                if (!numbers.includes(num)) {
                    numbers.push(num);
                }
            }
            
            for (let i = 0; i < 5; i++) {
                document.getElementById(`num${i + 1}`).value = numbers[i];
            }
        }

        function playNumbersGame() {
            // Numbers game logic preserved...
            showNotification('Numbers game functionality preserved from previous version');
        }

        // Achievement system (expanded)
        const achievements = [
            // Numbers game achievements
            { id: 'firstWin', title: 'First Victory', desc: 'Win your first numbers game', icon: '🎉', reward: 500 },
            
            // Trivia achievements
            { id: 'triviaDebut', title: 'Brain Teaser', desc: 'Complete your first trivia game', icon: '🧠', reward: 200 },
            { id: 'triviaPerfect', title: 'Perfect Score', desc: 'Get 15/15 correct in trivia', icon: '💯', reward: 1000 },
            { id: 'triviaStreak10', title: 'Knowledge Master', desc: 'Get 10 questions correct in a row', icon: '🎯', reward: 500 },
            { id: 'trivia100Games', title: 'Trivia Veteran', desc: 'Play 100 trivia games', icon: '📚', reward: 2000 },
        ];

        function checkAchievements() {
            // Achievement checking logic...
        }

        function renderAchievements() {
            // Achievement rendering logic...
        }

        // Initialize
        function init() {
            loadGameData();
            updateDisplay();
            updateTriviaDisplay();
            updateStats();

            // Initialize voice system
            if ('speechSynthesis' in window) {
                // Trigger voice loading
                speechSynthesis.getVoices();
                speechSynthesis.onvoiceschanged = initializeVoice;
                
                // Initial voice check
                initializeVoice();
            }

            // Check daily bonus
            const today = new Date().toDateString();
            if (gameData.lastDailyBonus === today) {
                document.getElementById('dailyBonus').classList.add('claimed');
                document.getElementById('dailyBonus').innerHTML = `
                    <div>✅ Daily Bonus Claimed!</div>
                    <div style="font-size: 0.9rem;">Come back tomorrow for more</div>
                `;
            }

            // Set initial button states
            setTimeout(() => {
                // Update voice toggle button based on saved preference and availability
                const voiceButton = document.getElementById('voiceToggle');
                if (gameData.selectedVoice && gameData.voiceEnabled) {
                    voiceButton.textContent = '🎙️ Nigerian Voice ON';
                    voiceButton.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                } else if (gameData.selectedVoice && !gameData.voiceEnabled) {
                    voiceButton.textContent = '🔇 Voice OFF';
                    voiceButton.style.background = 'linear-gradient(45deg, #6c757d, #adb5bd)';
                } else {
                    voiceButton.textContent = '❌ No African Voice';
                    voiceButton.style.background = 'linear-gradient(45deg, #dc3545, #fd7e14)';
                }

                // Update sound toggle button based on saved preference
                const soundButton = document.getElementById('soundToggle');
                if (!gameData.soundEnabled) {
                    soundButton.textContent = '🔇 Sound OFF';
                    soundButton.style.background = 'linear-gradient(45deg, #6c757d, #adb5bd)';
                }

                // Update auto-next toggle button based on saved preference
                const autoNextButton = document.getElementById('autoNextToggle');
                if (gameData.autoNext) {
                    autoNextButton.textContent = '⚡ Auto Next ON';
                    autoNextButton.style.background = 'linear-gradient(45deg, #28a745, #20c997)';
                } else {
                    autoNextButton.textContent = '👆 Manual Next';
                    autoNextButton.style.background = 'linear-gradient(45deg, #ff6b6b, #ee5a24)';
                }
            }, 1000);
        }

        init();
    </script>
</body>
</html>
